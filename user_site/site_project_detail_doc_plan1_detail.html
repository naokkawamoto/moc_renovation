<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>案件管理（お客様資料）</title>
  <meta name="viewport" content="width=1024, height=1366, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css" rel="stylesheet"/>
  <style>
    body, html { width:1024px; height:1366px; margin:0; padding:0; overflow:hidden; }
    .container-fluid { max-width:1024px; height:calc(100vh - 56px); overflow-y:auto; }
    #footer-container { position:fixed; bottom:0; left:0; width:1024px; z-index:1000; }
    .folder-card { cursor: pointer; }
  </style>
</head>
<body>
  <div class="container-fluid mt-4 px-3">
    <!-- ヘッダー：会社名＋案件名 & 案件フロー -->
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div class="text-start">
        <h5 class="mb-0">会社名</h5>
        <h4 class="mb-0 d-inline">案件名 <i class="bi bi-star"></i></h4>
      </div>
      <div class="text-end">
        <span class="me-2">案件フロー:</span>
        <select class="form-select form-select-sm me-2" style="width:auto; display:inline-block;">
          <option>案件登録中</option>
          <option>現地調査中</option>
          <option selected>プラン中</option>
          <option>見積もり中</option>
          <option>資金計画中</option>
        </select>
        <button class="btn btn-outline-primary btn-sm">変更</button>
      </div>
    </div>

    <!-- ワークフロー バッジ -->
    <div class="d-flex justify-content-end mb-3">
      <span class="badge bg-light text-dark me-2">案件登録中</span>
      <span class="badge bg-light text-dark me-2">現地調査中</span>
      <span class="badge bg-light text-dark me-2">プラン中</span>
      <span class="badge bg-light text-dark me-2">見積もり中</span>
      <span class="badge bg-primary">資金計画中</span>
    </div>

    <!-- ナビゲーションタブ -->
    <ul class="nav nav-tabs mb-3">
      <li class="nav-item"><a class="nav-link" href="site_project_detail.html">概要</a></li>
      <li class="nav-item"><a class="nav-link" href="site_project_detail_investigate.html">現地調査</a></li>
      <li class="nav-item"><a class="nav-link" href="site_project_detail_designlist.html">プラン一覧</a></li>
      <li class="nav-item"><a class="nav-link active" href="site_project_detail_doc.html">お客様資料</a></li>
      <li class="nav-item"><a class="nav-link" href="site_project_detail_chat.html">チャット <span class="badge bg-danger">5</span></a></li>
    </ul>


    <!-- タイトル -->
    <div class="mb-2">
        <h4>お客様資料詳細</h4>
      </div>
  
      <!-- パンくずリスト -->
      <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb small-text mb-0">
          <li class="breadcrumb-item">
            <a href="site_project_detail_doc.html" class="text-decoration-none">お客様資料</a>
          </li>
          <li class="breadcrumb-item">
            <a href="site_project_detail_doc_plan1.html" class="text-decoration-none">プラン１</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">お客様資料詳細</li>
        </ol>
      </nav>
  
      <!-- サブタイトル -->
      <div class="mb-2 px-3">
        <h5 class="mb-0">リノベプラン</h5>
      </div>
    
        <!-- テーブル -->
        <div class="table-responsive small-text mb-4">
          <table class="table table-hover table-bordered mb-0">
            <thead class="table-light">
              <tr>
                <th>資料名称</th>
                <th>社内（購読）</th>
                <th>協力業者（購読）</th>
                <th>専門業者（購読）</th>
                <th>作成者</th>
                <th>公開設定</th>
                <th>作成日時</th>
                <th>アクション</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>案件名_リノベプラン_20250507</td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#publishSettingModalStaff">公開</button>
                  <button class="btn btn-link p-0 small-text align-baseline" data-bs-toggle="modal" data-bs-target="#subscribersModalStaff">（3）</button>
                </td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#publishSettingModalPartner">公開</button>
                  <button class="btn btn-link p-0 small-text align-baseline" data-bs-toggle="modal" data-bs-target="#subscribersModalPartner">（3）</button>
                </td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#publishSettingModalExpert">非公開</button>
                  <button class="btn btn-link p-0 small-text align-baseline" data-bs-toggle="modal" data-bs-target="#subscribersModalExpert">（0）</button>
                </td>
                <td>河本直己</td>
                <td>公開</td>
                <td>2025/05/07 10:00</td>
                <td>
                  <button class="btn btn-sm btn-outline-primary" onclick="openDownloadModal('案件名_リノベプラン_20250507')">
                    <i class="bi bi-file-earmark-arrow-down"></i> ダウンロード
                  </button>
                </td>
              </tr>
              <tr>
                <td>案件名_リノベプラン_20250506</td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#publishSettingModalStaff">公開</button>
                  <button class="btn btn-link p-0 small-text align-baseline" data-bs-toggle="modal" data-bs-target="#subscribersModalStaff">（3）</button>
                </td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#publishSettingModalPartner">公開</button>
                  <button class="btn btn-link p-0 small-text align-baseline" data-bs-toggle="modal" data-bs-target="#subscribersModalPartner">（3）</button>
                </td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#publishSettingModalExpert">非公開</button>
                  <button class="btn btn-link p-0 small-text align-baseline" data-bs-toggle="modal" data-bs-target="#subscribersModalExpert">（0）</button>
                </td>
                <td>河本直己</td>
                <td>限定公開</td>
                <td>2025/05/06 10:30</td>
                <td>
                  <button class="btn btn-sm btn-outline-primary" onclick="openDownloadModal('案件名_リノベプラン_20250506')">
                    <i class="bi bi-file-earmark-arrow-down"></i> ダウンロード
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    
        <!-- 社内購読者モーダル -->
        <div class="modal fade" id="subscribersModalStaff" tabindex="-1" aria-labelledby="subscribersModalStaffLabel" aria-hidden="true">
          <div class="modal-dialog modal-sm">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="subscribersModalStaffLabel">社内購読者一覧</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body small-text">
                <ul class="list-unstyled mb-0">
                  <li>1. 東京本社 営業部 山田 太郎</li>
                  <li>2. 大阪支店 設計部 鈴木 一郎</li>
                  <li>3. 名古屋支店 工務部 佐藤 次郎</li>
                </ul>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">閉じる</button>
              </div>
            </div>
          </div>
        </div>
        <!-- 協力業者購読者モーダル -->
        <div class="modal fade" id="subscribersModalPartner" tabindex="-1" aria-labelledby="subscribersModalPartnerLabel" aria-hidden="true">
          <div class="modal-dialog modal-sm">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="subscribersModalPartnerLabel">協力業者購読者一覧</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body small-text">
                <ul class="list-unstyled mb-0">
                  <li>1. 株式会社ABC建設 工事担当 田中 三郎</li>
                  <li>2. 株式会社XYZ設計 設計担当 高橋 四郎</li>
                  <li>3. 株式会社123設備 設備担当 伊藤 五郎</li>
                </ul>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">閉じる</button>
              </div>
            </div>
          </div>
        </div>
        <!-- 専門業者購読者モーダル -->
        <div class="modal fade" id="subscribersModalExpert" tabindex="-1" aria-labelledby="subscribersModalExpertLabel" aria-hidden="true">
          <div class="modal-dialog modal-sm">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="subscribersModalExpertLabel">専門業者購読者一覧</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body small-text">
                <ul class="list-unstyled mb-0">
                  <li>購読者はいません</li>
                </ul>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">閉じる</button>
              </div>
            </div>
          </div>
        </div>
    
        <!-- ダウンロード形式選択モーダル -->
        <div class="modal fade" id="downloadModal" tabindex="-1" aria-labelledby="downloadModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="downloadModalLabel">ダウンロード形式を選択</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="downloadForm">
                  <input type="hidden" id="downloadFileName">
                  <div class="mb-3">
                    <label class="form-label">形式を選択してください</label>
                    <select class="form-select" id="downloadFormat" required>
                      <option value="dxf">DXF</option>
                      <option value="jww">JWW</option>
                      <option value="dwg">DWG</option>
                      <option value="pdf">PDF</option>
                    </select>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                <button type="button" class="btn btn-primary" onclick="downloadSelectedFile()">ダウンロード</button>
              </div>
            </div>
          </div>
        </div>
    
        <!-- 社内公開設定モーダル（チェックボックス） -->
        <div class="modal fade" id="publishSettingModalStaff" tabindex="-1" aria-labelledby="publishSettingModalStaffLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="publishSettingModalStaffLabel">社内公開設定</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p class="mb-4">この案件を以下の社内メンバーに公開するにはチェックボックスを押してください。</p>
                <div class="mb-4">
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" id="allStaff">
                    <label class="form-check-label fw-bold" for="allStaff">
                      社内担当者全て
                    </label>
                  </div>
                  <div class="ms-4">
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="staff1">
                      <label class="form-check-label" for="staff1">
                        東京本社 営業部 山田 太郎
                      </label>
                    </div>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="staff2">
                      <label class="form-check-label" for="staff2">
                        大阪支店 設計部 鈴木 一郎
                      </label>
                    </div>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="staff3">
                      <label class="form-check-label" for="staff3">
                        名古屋支店 工務部 佐藤 次郎
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
                <button type="button" class="btn btn-primary">保存</button>
              </div>
            </div>
          </div>
        </div>
        <!-- 協力業者公開設定モーダル（チェックボックス） -->
        <div class="modal fade" id="publishSettingModalPartner" tabindex="-1" aria-labelledby="publishSettingModalPartnerLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="publishSettingModalPartnerLabel">外部協力会社公開設定</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p class="mb-4">この案件を以下の外部協力会社に公開するにはチェックボックスを押してください。</p>
                <div class="mb-4">
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" id="allPartners">
                    <label class="form-check-label fw-bold" for="allPartners">
                      外部協力業者全て
                    </label>
                  </div>
                  <div class="ms-4">
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="partner1">
                      <label class="form-check-label" for="partner1">
                        株式会社ABC建設 工事担当 田中 三郎
                      </label>
                    </div>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="partner2">
                      <label class="form-check-label" for="partner2">
                        株式会社XYZ設計 設計担当 高橋 四郎
                      </label>
                    </div>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="partner3">
                      <label class="form-check-label" for="partner3">
                        株式会社123設備 設備担当 伊藤 五郎
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
                <button type="button" class="btn btn-primary">保存</button>
              </div>
            </div>
          </div>
        </div>
        <!-- 専門業者公開設定モーダル（チェックボックス） -->
        <div class="modal fade" id="publishSettingModalExpert" tabindex="-1" aria-labelledby="publishSettingModalExpertLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="publishSettingModalExpertLabel">外部専門業者公開設定</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p class="mb-4">この案件を以下の外部専門業者に公開するにはチェックボックスを押してください。</p>
                <div class="mb-4">
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" id="allExperts">
                    <label class="form-check-label fw-bold" for="allExperts">
                      外部専門家全て
                    </label>
                  </div>
                  <div class="ms-4">
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="expert1">
                      <label class="form-check-label" for="expert1">
                        株式会社建築コンサル 構造設計 渡辺 六郎
                      </label>
                    </div>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="expert2">
                      <label class="form-check-label" for="expert2">
                        株式会社法務事務所 法務担当 中村 七郎
                      </label>
                    </div>
                    <div class="form-check mb-2">
                      <input class="form-check-input" type="checkbox" id="expert3">
                      <label class="form-check-label" for="expert3">
                        株式会社税理士法人 税務担当 小林 八郎
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
                <button type="button" class="btn btn-primary">保存</button>
              </div>
            </div>
          </div>
        </div>
    
      </div>

  <div id="footer-container"></div>

  <!-- Bootstrap & Popper -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../style.js"></script>
  <script>
    fetch('site_footer.html')
      .then(r => r.text())
      .then(html => document.getElementById('footer-container').innerHTML = html);

    // ダウンロードモーダルを開く
    function openDownloadModal(fileName) {
      document.getElementById('downloadFileName').value = fileName;
      document.getElementById('downloadFormat').selectedIndex = 0;
      const modal = new bootstrap.Modal(document.getElementById('downloadModal'));
      modal.show();
    }

    // ダウンロード処理（ダミー）
    function downloadSelectedFile() {
      const fileName = document.getElementById('downloadFileName').value;
      const format = document.getElementById('downloadFormat').value;
      alert(`${fileName} を ${format.toUpperCase()} 形式でダウンロードします（ダミー動作）`);
      const modal = bootstrap.Modal.getInstance(document.getElementById('downloadModal'));
      modal.hide();
    }
  </script>
</body>
</html>

